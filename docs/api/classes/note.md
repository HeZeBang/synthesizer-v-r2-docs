---
title: Note
---

## 音符

一个由音高（ pitch）、歌词（lyrics）、起始时间（onset）、时长（duration）等定义的音符。其会被置于一个 [`NoteGroup`](https://resource.dreamtonics.com/scripting/NoteGroup.html) 中。

### 扩展

- [NestedObject](https://resource.dreamtonics.com/scripting/NestedObject.html)

### 方法

#### clone() → {[Note](https://resource.dreamtonics.com/scripting/Note.html)}

对当前对象进行深复制（deepcopy）。

##### 返回：

类型	[Note](https://resource.dreamtonics.com/scripting/Note.html)

#### getAttributes() → {object}

获取一个包含音符属性的对象。该对象拥有如下属性。

- `tF0Offset`: `number` 音高转变 - 偏移（秒）
- `tF0Left`: `number` 音高变化 - 时长 - 左（秒）
- `tF0Right`: `number` 音高变化 - 时长 - 右（秒）
- `dF0Left`: `number` 音高变化 - 深度 - 左（半音）
- `dF0Right`: `number` 音高变化 - 深度 - 右（半音）
- `tF0VbrStart`: `number` 颤音 - 开始（秒）
- `tF0VbrLeft`: `number` 颤音 - 左（秒）
- `tF0VbrRight`: `number` 颤音 - 右（秒）
- `dF0Vbr`: `number` 颤音 - 深度（半音）
- `pF0Vbr`: `number` 颤音 - 相位（弧度，-π ~ π）
- `fF0Vbr`: `number` 颤音 - 频率（Hz）
- `tNoteOffset`: `number` 时间和音素 - 音符偏移（秒）
- `exprGroup` (optional): `string` 表现力分组
- `dur`: array of `number` 音素时长尺度
- `alt`: array of `number` 可替换的音素发音

如果该音符使用的是该音符组引用（[`NoteGroupReference`](https://resource.dreamtonics.com/scripting/NoteGroupReference.html) ）的默认值，则对应属性的取值为 NaN。

##### 返回：

类型	object

#### getDuration() → {number}

获取音符的持续时间。单位为blicks。

##### 返回：

类型	number

#### getEnd() → {number}

获取音符的结束位置（起始+持续时间）。单位为blicks。

##### 返回：

类型	number

#### getIndexInParent() → {number}

> 继承自：[NestedObject#getIndexInParent](https://resource.dreamtonics.com/scripting/NestedObject.html#getIndexInParent)

获取当前对象在其父对象中的索引。对 Lua，该索引值从1开始。对JavaScript，该索引值从0开始。

#### getLyrics() → {string}

获取当前音符的歌词。

##### 返回：

类型	string

#### getOnset() → {number}

获取当前音符的起始位置。单位为blicks。

##### 返回：

类型	number

#### getParent() → {[NestedObject](https://resource.dreamtonics.com/scripting/NestedObject.html)|undefined}

> 继承自：[NestedObject#getParent](https://resource.dreamtonics.com/scripting/NestedObject.html#getParent)

获取父 [`NestedObject`](https://resource.dreamtonics.com/scripting/NestedObject.html) 。如果当前对象未连接到一个父对象，则返回 `undefined` 。

##### 返回：

类型	[NestedObject](https://resource.dreamtonics.com/scripting/NestedObject.html) | undefined

#### getPhonemes() → {string}

返回用户指定的音素，用空格分隔。如，”hh ah ll ow“。

如果没有指定音素，其会返回一个空字符串而非默认发音（见 [`SV#getPhonemesForGroup`](https://resource.dreamtonics.com/scripting/SV.html#getPhonemesForGroup) ）。

##### 返回：

类型	string

#### getPitch() → {number}

获取音高对应的MIDI编号，C4对应60。

##### 返回：

类型	number

#### isMemoryManaged() → {boolean}

> 继承自：[NestedObject#isMemoryManaged](https://resource.dreamtonics.com/scripting/NestedObject.html#isMemoryManaged)

检查当前对象是否被内存管理（即垃圾是否被脚本环境所收集）。

##### 返回：

类型	布尔

#### setAttributes(object)

借助一个属性对象来设置音符属性。属性对象并不需要是完整的；仅给出的属性会被更新。如，

```javascript
note.setAttributes({
  "tF0Offset" : 0.05,
  "exprGroup" : "C4",
  "alt" : [0, 1]
});
```

##### 参数：

| 参数名     | 类型       | 描述                                                         |
| :------- | :--------- | :----------------------------------------------------------- |
| `object` | attributes | 定义见 [`Note#getAttributes`](https://resource.dreamtonics.com/scripting/Note.html#getAttributes) |

#### setDuration(t)

将音符时长设置为 `t` 。单位为blicks。其同时也会变更结束位置，但不会更改起始位置。

##### 参数：

| 参数名 | 类型   | 描述 |
| :--- | :----- | :--- |
| `t`  | number |      |

#### setLyrics(lyrics)

更改歌词。

| 参数名     | 类型   | 描述 |
| :------- | :----- | :--- |
| `lyrics` | string |      |

#### setOnset(t)

将音符更改至由 `t` 开始。单位为blicks。其不会变更时长。

##### 参数：

| 参数名 | 类型   | 描述 |
| :--- | :----- | :--- |
| `t`  | number |      |

#### setPitch(pitchNumber)

设置音符的音高为`pitchNumber` （MIDI编号）。

##### 参数：

| 参数名          | 类型   | 描述 |
| :------------ | :----- | :--- |
| `pitchNumber` | number |      |

#### setTimeRange(onset, duration)

同时设置起始位置和时长。这是一个对 `setOnset(onset)` 和 `setDuration(duration)` 的快捷调用。

##### 参数：

| 参数名       | 类型   | 描述 |
| :--------- | :----- | :--- |
| `onset`    | number |      |
| `duration` | number |      |

*Documentation generated by* [JSDoc 3.6.4](https://github.com/jsdoc3/jsdoc) *on Thu Jul 23 2020 13:51:59 GMT+0900 (Japan Standard Time) using the* [docdash](https://github.com/clenemt/docdash) *theme.*

*Copyright 2020 Dreamtonics Co., Ltd.*

<BrowserOnly fallback={<div></div>}>{() => <GitalkComponent options={{
    clientID: '2537efeef8962e53223d',
    clientSecret: 'da454b36ea826630b34f708d39992fd962726a39',
    repo: 'synthesizer-v-r2-docs',
    owner: 'linyuansup',
    admin: ['linyuansup'],
    }} />}
</BrowserOnly>

import Gitalk from 'gitalk';
import 'gitalk/dist/gitalk.css';
import GitalkComponent from 'gitalk/dist/gitalk-component';
import BrowserOnly from '@docusaurus/BrowserOnly';